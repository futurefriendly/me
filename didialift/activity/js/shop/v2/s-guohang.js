document.addEventListener("DOMContentLoaded",function(){function e(e){dd.dialog.alert({icon:{url:"http://static.xiaojukeji.com/activity/img-mall/"+(e.icon||"error.png"),width:e.width,height:e.height},tip:e.msg,btn:{val:e.val,handler:function(){}}})}var t=document,i=t.getElementById("commit"),n=t.getElementById("getBtn"),o=t.getElementById("shopCode"),l=t.getElementById("cardCode"),d=t.getElementById("product_id").value,g={isNull:{msg:"您所填写的信息不完整，请补充",icon:"error.png",width:"7px",height:"42px",val:"确定"},timeout:{msg:"请求超时",icon:"error.png",width:"7px",height:"42px",val:"我知道了"},fail:{msg:"服务器繁忙，稍后再试",icon:"error.png",width:"7px",height:"42px",val:"我知道了"},succeed:{msg:"您已提交成功，兑换的里程将于24小时内到账",icon:"succeed.png",width:"31px",height:"31px",val:"我知道了"}};touch(n,function(){location.href="http://diditaxi.com.cn/imall/detail?id="+d+"&token="+getQuerySting().token+"&lat="+getQuerySting().lat+"&lng="+getQuerySting().lng},!1),i.addEventListener("click",function(){if(""==o.value||""==l.value)e(g.isNull);else{var t=null;t=new dd.dialog.Fn('<div class="loading-logo"></div>'),t.show(),ajax({method:"GET",url:"/imall/redeem/submit?memberNumber="+l.value+"&code="+o.value+"&token="+getQuerySting().token+"&lat="+getQuerySting().lat+"&lng="+getQuerySting().lng,succFunc:function(i){t.hide();var n=txtToJson(i);0==n.errno?e(g.succeed):(g.other={},g.other.msg=n.errmsg,g.other.width="7px",g.other.height="42px",e(g.other))},failFunc:function(){e(g.fail)}})}},!1)},!1);