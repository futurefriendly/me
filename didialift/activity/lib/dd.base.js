!function(window,undefined){var dd=window.dd||{};if(!dd||!dd.base){window.dd=dd;var b=dd.base||{};b.diffPlatform=function(t){var e=navigator.userAgent,n=function(t){"function"==typeof t&&t()};e.match(/(Android)/i)?n(t.android):e.match(/(iPhone|iPod|ios|iPad)/i)?n(t.ios):e.match(/(Windows phone)/i)?n(t.wp):n(t.others)},b.loadJS=function(t,e){var n=document.createElement("script");n.type="text/javascript",n.src=t,document.getElementsByTagName("head")[0].appendChild(n),n.onload=n.onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||"function"==typeof e&&e()}},b.jsonp=function(t,e){var n=document.createElement("script");n.type="text/javascript",n.src=t+"&callback=dd.jsonp."+e,document.getElementsByTagName("head")[0].appendChild(n)},b.touch=function(t,e){t&&"function"==typeof e&&(t.addEventListener("touchstart",function(t){t.target.focus(),t.stopPropagation()},!1),t.addEventListener("touchmove",function(t){t.target.setAttribute("moved","true")},!1),t.addEventListener("touchend",function(t){t.target.blur(),"true"!==t.target.getAttribute("moved")?e(t):t.target.setAttribute("moved","false")},!1))},b.getElesByKls=function(t,e){if(t=t?t:document.body,t.getElementsByClassName)return t.getElementsByClassName(e);for(var n=[],o=t.getElementsByTagName("*"),r=0,i=o.length;i>r;r++)o[r].getAttribute&&-1!==o[r].getAttribute("className").indexOf(e)&&n.push(o[r]);return n},b.getQueryStr=function(){var t,e,n,o={},r=location.search.length?location.search.substring(1):"";if(!r)return o;if(-1===r.indexOf("&")&&r.indexOf("=")>-1)return t=r.split("="),e=decodeURIComponent(t[0]),n=decodeURIComponent(t[1]),e&&(o[e]=n||""),o;if(r.indexOf("&")>-1){items=queryString.split("&");for(var i=0,a=items.length;a>i;i++)t=items[i].split("="),e=decodeURIComponent(t[0]),e=decodeURIComponent(t[1]),e&&(o[e]=n);return o}},b.txtToJson=function(txt){if(txt){var j={};try{j=JSON.parse(txt)}catch(e){try{j=eval("("+txt+")")}catch(ee){}}return j}};var _singleton=function(t){var e=null;return function(){return e||(e=t.apply(this,arguments))}},createXhr=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}},_XHR=_singleton(createXhr);b.ajax=function(t){var e=function(t){if(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e+="&"+n+"="+t[n]);return e.replace(/^\&/,"")}};if(t){var n=t.isSequenceReq===!0?new _XHR:createXhr();t.isSequenceReq===!0&&0!==n.readyState&&n.abort();var o=0,r=t.timeout;if(t.async!==!1&&(t.async=!0),n.open(t.method,t.url,t.async),n.onreadystatechange=function(){4===n.readyState&&(o&&clearTimeout(o),200===n.status?t.succFunc(n.responseText):t.failFunc(n.responseText))},"GET"===t.method.toUpperCase())n.send(null);else if("POST"===t.method.toUpperCase()){var i=t.data?e(t.data):"";n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(i)}if(r){var a=r.millisecond||1e4;o=setTimeout(function(){n.abort(),r.callback&&r.callback()},a)}}},b.setCookie=function(t,e,n){var o=new Date;n?o.setTime(o.getTime()+n):o.setTime(o.getTime()+2592e6),document.cookie=t+"="+escape(e)+";expires="+o.toGMTString()},b.getCookie=function(t){var e,n=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return e=document.cookie.match(n),e?unescape(e[2]):null},b.delCookie=function(t){var e=new Date;e.setTime(e.getTime()-1);var n=b.getCookie(t);null!=n&&(document.cookie=t+"=11111;expires="+e.toGMTString())},b.clearCookies=function(){var t=document.cookie.match(/[^ =;]+(?=\=)/g);if(t)for(var e=t.length;e--;)document.cookie=t[e]+"=0;expires=Thu, 01 Jan 1970 00:00:00 GMT;"},b.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},b.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},b.isFunc=function(t){return"[object Function]"===Object.prototype.toString.call(t)},b.collectLog=function(t,e,n){this.ajax({method:"GET",url:"/api/v2/weixinapi/collect_log?openid="+t+"&phone="+e+n})},Function.prototype.method=function(t,e){return this.prototype[t]||(this.prototype[t]=e),this},String.method("trim",function(){return this.replace(/^\s+|\s$/g,"")}),Array.method("contain",function(t){for(var e in this)if(this[e]===t)return!0;return!1}),dd.base=b}}(window);