<html>
<head>
<meta http-equiv="Content-type" content="text/html;charset=utf-8"/>
    <meta id="viewport" name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <meta content="telephone=no" name="format-detection"/>
    <title>滴滴打车</title>
    <link rel="stylesheet" type="text/css" href="http://static.diditaxi.com.cn/webapp/css/merged-common-ui.css">
    <style type="text/css">
    	html {
			font-size: 10px;
			width: 100%;
			height: 100%;
			background: #FFF;
		}
		body {
			color: #777;
			font-family: 微软雅黑;
			-webkit-appearance: none;
			-webkit-tap-highlight-color: rgba(0, 0, 0, 0);
			overflow: hidden;
			width: 100%;
			height: 100%;
		}
		ul li {
			list-style: none
		}
		* {
			margin: 0;
		}
		img {
			border: none;
		}
		input {
			outline: none;
			-webkit-outline: none;
		}
		#logo{
			width: 100%;
			height: 40%;
			position: absolute;
			top: 40%;
			text-align: center;
		}
    </style>
</head>
<body>
	<div id="logo">
		<img src="http://www.xiaojukeji.com/website/images/icon02.png">
	</div>
<script type="text/javascript" src="http://static.diditaxi.com.cn/webapp/js/merged-base-dialog.js"></script>

<script type="text/javascript">
window.addEventListener("DOMContentLoaded",function(){
	var base = dd.base || {},
		dialog = dd.dialog || {};

	dialog.loading("加载中...",10000);

	document.addEventListener('WeixinJSBridgeReady', function onBridgeReady() {

		var didiAppCfg = {
		    ios: {
		        "packageName":"com.xiaojukeji.didi", 
				"packageUrl":"diditaxi: passenger", 
				"downloadUrl":"https://itunes.apple.com/cn/app/di-di-da-che-zhi-jian-shang/id554499054?ls=1&mt=8"
		    },
		    android: {
		        "packageName":"com.sdu.didi.psnger", 
				"packageUrl":"didipasnger://didi_apk_intalled_scheme", 
				"downloadUrl":"http://pay.xiaojukeji.com/share/tmp_download.html"
		    }
		};

		function callNative(){
		    var params;
		    base.diffPlatform({
		        ios: function() {
		            params = didiAppCfg.ios;
		        },
		        android: function() {
		            params = didiAppCfg.android;
		        }
		    });

		    setTimeout(function() {
		        if(typeof WeixinJSBridge!="undefined"){
		            WeixinJSBridge.invoke('getInstallState', params, function(e) {
		                var msg = e.err_msg;
		                if(msg.indexOf("get_install_state:yes") > -1) {
                            window.location.href = params.packageUrl;
                        }else{
                            window.location.href = params.downloadUrl;
                        }
		            });
		        }else{
		            window.parent.location.href='http://pay.xiaojukeji.com/share/tmp_download.html';
		        }
		    }, 200);
		}

		callNative();
	});
	
},false);
</script>
</body>

</html>
