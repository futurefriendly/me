<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
	<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" media="(device-height: 568px)" />
	<meta content="telephone=no" name="format-detection" />
	<link rel="stylesheet" type="text/css" href="http://static.diditaxi.com.cn/activity/base.css">
	<title>滴滴打车</title>
	<style type="text/css">
		#sharetoQQ,#sharetoQZone{
			width: 150px;
			height: 50px;
			margin-top: 40%;
		}
	</style>
</head>
<body>
	<button id="sharetoQQ">分享到手Q</button>
    <button id="sharetoQZone">分享到Qzone</button>
	<script type="text/javascript">
    /*
    @@初始化DidiJSBridge
    */ 
    var connectDidiJSBridge = function(callback) {
        if (window.DidiJSBridge) {
            callback(DidiJSBridge);
        } else {
            document.addEventListener('DidiJSBridgeReady', function() {
                callback(DidiJSBridge);
            }, false);
        }
    };

    // 操作入口的配置信息
var entranceCfg = {
        entrance: { // 入口本身的icon可定制，不限于微信的右上角三个点
            icon: 'http://static.diditaxi.com.cn/webapp/images/driver.png'
        },
        buttons: [{ // 操作内部的按钮们，关闭按钮已经不出现在操作面板区域了。
            type: 'page_refresh',
            name: '刷新'
        }, {
            type: 'share_weixin_timeline',
            name: '分享到微信朋友圈',
            data: {
                share_url: 'http://www.baidu.com', // 分享出去的URL
                share_icon_url: 'http://static.xiaojukeji.com/webapp/images/driver.png', // 分享小图icon
                share_img_url: 'http://diditaxi.com.cn/share/images/na_landing_kuhang/02.png', // 分享大图
                share_title: '这里是分享标题',
                share_content: '这里是分享的内容',
                share_from: '' // 分享来源，便于做统计
            },
            callback: function() {

            }
        }, {
            type: 'share_weixin_appmsg',
            name: '分享给微信好友',
            data: {
                share_url: 'http://www.baidu.com', 
                share_icon_url: 'http://static.xiaojukeji.com/webapp/images/driver.png', 
                share_img_url: 'http://diditaxi.com.cn/share/images/na_landing_kuhang/02.png',
                share_title: '这里是分享标题',
                share_content: '这里是分享的内容',
                share_from: '' // 分享来源，便于做统计
            },
            callback: function() {

            }
        }, {
            type: 'share_sina_weibo',
            name: '分享到新浪微博',
            data: {
                share_url: 'http://www.baidu.com', 
                share_icon_url: 'http://static.xiaojukeji.com/webapp/images/driver.png', 
                share_img_url: 'http://diditaxi.com.cn/share/images/na_landing_kuhang/02.png',
                share_title: '这里是分享标题',
                share_content: '这里是分享的内容',
                share_from: '' // 分享来源，便于做统计
            },
            callback: function() {

            }
        }, {
            type: 'share_tencent_weibo', // 腾讯微博已经干掉了，即使初始化也不会被响应了，请知晓
            name: '分享到腾讯微博',
            data: {
                share_url: 'http://www.baidu.com',
                share_icon_url: 'http://static.xiaojukeji.com/webapp/images/driver.png', 
                share_img_url: 'http://diditaxi.com.cn/share/images/na_landing_kuhang/02.png', 
                share_title: '这里是分享标题',
                share_content: '这里是分享的内容',
                share_from: '' // 分享来源，便于做统计
            },
            callback: function() {

            }
        }, {
            type: 'share_qq_appmsg',
            name: '分享给QQ好友',
            data: {
                share_url: 'http://www.baidu.com', 
                share_icon_url: 'http://static.xiaojukeji.com/webapp/images/driver.png', 
                share_img_url: 'http://diditaxi.com.cn/share/images/na_landing_kuhang/02.png', 
                share_title: '这里是分享标题',
                share_content: '这里是分享的内容',
                share_from: '' // 分享来源，便于做统计
            },
            callback: function() {

            }
        }, {
            type: 'share_qzone',
            name: '分享到QQ空间',
            data: {
                share_url: 'http://www.baidu.com', 
                share_icon_url: 'http://static.xiaojukeji.com/webapp/images/driver.png',
                share_img_url: 'http://diditaxi.com.cn/share/images/na_landing_kuhang/02.png',
                share_title: '这里是分享标题',
                share_content: '这里是分享的内容',
                share_from: '' // 分享来源，便于做统计
            },
            callback: function() {

            }
        }, {
            type: 'web_redirect', // 自定义的按钮
            name: '打车券使用规则',
            icon: 'http://static.diditaxi.com.cn/webapp/images/driver.png',
            redirect_url: 'http://www.baidu.com'
        }]
    };

    connectDidiJSBridge(function(bridge) {
        if (typeof bridge === 'undefined') {alert("这不是didi的native环境,请自重!");return;};
        var json = {
            page_name: 'init_entrance',
            orderid: 'init_entrance'
        }
        bridge.callHandler('init_entrance', JSON.stringify(json));
    });
    

    var sharetoQQ=document.getElementById("sharetoQQ"),
        sharetoQZone=document.getElementById("sharetoQZone");
    sharetoQQ.addEventListener("touchend",function(){
    	connectDidiJSBridge(function(bridge) {
	        if (typeof bridge === 'undefined') {alert("这不是didi的native环境,请自重!");return;};
            var json = {
                page_name: 'sharetoQQ',
                orderid: 'sharetoQQ'
            }
            bridge.callHandler('share_qq_appmsg',JSON.stringify(entranceCfg.buttons[5].data),function  (data) {
                alert(JSON.stringify(data));
            });
	    });
    },false);

    sharetoQZone.addEventListener("touchend",function(){
        connectDidiJSBridge(function(bridge) {
            if (typeof bridge === 'undefined') {alert("这不是didi的native环境,请自重!");return;};
            var json = {
                page_name: 'sharetoQZone',
                orderid: 'sharetoQZone'
            }
            bridge.callHandler('share_qzone',JSON.stringify(entranceCfg.buttons[5].data),function  (data) {
                alert(JSON.stringify(data));
            });
        });
    },false);
    
	</script>
</body>
</html>