<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
	<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" media="(device-height: 568px)" />
	<meta content="telephone=no" name="format-detection" />
	<link rel="stylesheet" type="text/css" href="http://static.diditaxi.com.cn/activity/base.css">
	<title>滴滴打车</title>
	<style type="text/css">
		#callNativeLogin{
			width: 200px;
			height: 50px;
			margin: 30%;
		}
	</style>
</head>
<body>
	<button id="callNativeLogin">调起native登录页面</button>
	<script type="text/javascript">
var navig = window.navigator.userAgent;
alert(navig);
                if(navig.indexOf("QQ")!=-1){
	alert('这是QQ浏览器');
}
	//获取URL参数
    function getQueryString(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) return r[2]; return "";
    }

    /*
    @@初始化DidiJSBridge
    */ 
    var connectDidiJSBridge = function(callback) {
        if (window.DidiJSBridge) {
            callback(DidiJSBridge);
        } else {
            document.addEventListener('DidiJSBridgeReady', function() {
                callback(DidiJSBridge);
            }, false);
        }
    };

    var callNativeLogin=document.getElementById("callNativeLogin");
	alert(1);
	alert(document.querySelector("#callNativeLogin"));
    callNativeLogin.addEventListener("touchend",function(){
    	connectDidiJSBridge(function(bridge) {
	        if (typeof bridge === 'undefined') {alert("这不是didi的native环境,请自重!");return;};
            var json = {
                page_name: 'callNativeLogin',
                orderid: 'callNativeLogin'
            }
            bridge.callHandler('callNativeLogin', JSON.stringify(json));
	    });
    },false);
    
	</script>
</body>
</html>
