var A_MONTH=2592e6;Function.prototype.method=function(t,e){return this.prototype[t]||(this.prototype[t]=e),this},String.method("trim",function(){return this.replace(/^\s+|\s$/g,"")});var diff_platform=function(t){function e(t){"function"==typeof t&&t()}e(navigator.userAgent.match(/(Android)/i)?t.android:navigator.userAgent.match(/(iPhone|iPod|ios|iPad)/i)?t.ios:navigator.userAgent.match(/(Windows phone)/i)?t.wp:t.others)},asyncLoadJS=function(t,e){var i=document.createElement("script");i.type="text/javascript",i.src=t,document.getElementsByTagName("head")[0].appendChild(i),i.onload=i.onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||"function"==typeof e&&e()}},touch=function(t,e,i){i||(i=!1),t&&e&&(t.addEventListener("touchstart",function(t){t.target.focus(),t.stopPropagation()},i),t.addEventListener("touchmove",function(t){t.target.setAttribute("moved","true")},i),t.addEventListener("touchend",function(t){t.target.blur(),"true"!==t.target.getAttribute("moved")?e(t):t.target.setAttribute("moved","false")},i))},getElesByKlsName=function(t,e){if(t=t?t:document.body,t.getElementsByClassName)return t.getElementsByClassName(e);for(var i=[],n=t.getElementsByTagName("*"),o=0,a=n.length;a>o;o++)n[o].getAttribute&&-1!==n[o].getAttribute("className").indexOf(e)&&i.push(n[o]);return i},getQuerySting=function(){var t=location.search.length?location.search.substring(1):"",e={},i=t.split("&"),n=null,o=null,a=null;if(i)for(var l=0,r=i.length;r>l;l++)n=i[l].split("="),o=decodeURIComponent(n[0]),a=decodeURIComponent(n[1]),e[o]=a;return e},txtToJson=function(txt){var j={};if(txt)try{j=JSON.parse(txt)}catch(e){try{j=eval("("+txt+")")}catch(ee){}}return j},ajax=function(t){var e={createXhr:function(){var t;if(window.XMLHttpRequest)t=new XMLHttpRequest;else try{t=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(i){}}return t},obj2Body:function(t){var e="";if(t)for(var i in t)t.hasOwnProperty(i)&&(e+="&"+i+"="+t[i]);return e.replace(/^\&/,"")},abortReq:function(t){t&&t.abort()}},i=e.createXhr(),n=null;if(i){if(i.open(t.method,t.url,!0),i.onreadystatechange=function(){if(4===i.readyState){if(n&&clearTimeout(n),200===i.status?t.succFunc(i.responseText):t.failFunc(i.responseText),t.dialogFlag){var e=document.getElementById("d_wall"),o=document.getElementById("d_wrap");e&&(e.style.display="none"),o&&(o.style.display="none")}}else 3===i.readyState},"GET"===t.method.toUpperCase())i.send(null);else if("POST"===t.method.toUpperCase()){var o=t.data?e.obj2Body(t.data):"";i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(o)}if(t.timeout){var a=t.timeout.millisecond||3e4,l=t.timeout.callback||function(){};n=setTimeout(function(){e.abortReq(i),l()},a)}}},collectLog=function(t,e,i){ajax({method:"GET",url:"/api/v2/weixinapi/collect_log?openid="+t+"&phone="+e+i})},setCookie=function(t,e,i){var n=new Date;n.setTime(i?n.getTime()+i:n.getTime()+A_MONTH),document.cookie=t+"="+escape(e)+";expires="+n.toGMTString()},getCookie=function(t){var e,i=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return e=document.cookie.match(i),e?unescape(e[2]):null},delCookie=function(t){var e=getCookie(t);e&&(document.cookie=t+"="+e+";expires="+new Date(0).toGMTString())},clearCookies=function(){var t=document.cookie.match(/[^ =;]+(?=\=)/g);if(t)for(var e=t.length;e--;)document.cookie=t[e]+"=0;expires="+new Date(0).toGMTString()};!function(t,e){var i=t.didi||{};if(i.dialog)return i.dialog;t.didi=i;var n=t.document,o=n.documentElement,a=n.body,l=a.getElementsByTagName("script")[0],r=(a.scrollHeight,a.scrollWidth,o.scrollTop,o.scrollLeft,o.clientHeight,o.clientWidth,null),c=null,d=null,s=function(t){return this instanceof s?void new s.fn.init(t):d=new s(t)},p=function(t){var e=!1;return e=Array.isArray(t)},f=function(t){l?a.insertBefore(t,l):a.appendChild(t)};s.fn=s.prototype={constructor:s,init:function(t){if(t){var e=n.createElement("div");e.id="d_wall",e.style.backgroundColor=t.bgcolor||"black",e.style.opacity=t.opacity||"0.2",e.style.filter=t.opacity?"alpha(opacity="+100*t.opacity+")":"alpha(opacity=20)",e.className="didi-dialog-wall";var i=n.createElement("div");i.id="d_wrap",i.style.width=t.width||"260px",i.style.height=t.height||"210px",i.style.backgroundColor=t.d_bgcolor||"#e8e7e6",i.style.opacity=t.d_opacity?t.d_opacity:"",i.style.filter=t.d_opacity?"alpha(opacity="+100*t.d_opacity+")":"alpha(opacity=20)","loading"===t.type&&(i.style.padding="0px"),i.className="didi-dialog-wrap";var o="";if(t.bar!==!1&&(o+="<p class='didi-dialog-bar'></p>"),o+="<div style='"+("loading"===t.type?"padding:0px;":"padding: 0px 20px;")+"'>",t.dom&&1===t.dom.nodeType)o+=t.dom.outerHTML;else if(t.html&&"string"==typeof t.html)o+=t.html;else if(t.domId&&t.domId.length){var l=n.getElementById(t.domId);l&&(o+=l.outerHTML)}if(t.icon){var d=t.icon.url,s=t.icon.width||"61px",u=t.icon.height||"61px";if(d){var g="";g="loading"===t.type?"margin:36px 0px 10px 0":"margin:20px 0px 12px 0",o+='<p class="didi_dialog_icon" style="'+g+'"><span style="display: inline-block; width:'+s+";height:"+u+"; background:url("+d+") no-repeat; background-size:"+s+" "+u+';"></span></p>'}}if(t.title&&p(t.title))for(var h=0,y=t.title.length;y>h;h++){var m=t.title[h];if(m){var v=m.color||"#ff8a01",x=m.fontSize||"1.4em";o+='<p class="didi-dialog-title" style="color:'+v+";font-size:"+x+';">'+m.txt+"</p>"}}if(t.tips&&p(t.tips))for(var b=0,w=t.tips.length;w>b;b++){var _=t.tips[b];if(_){var k=_.color||"#666666",T=_.fontSize||"1.0em";o+='<p class="didi-dialog-p" style="color:'+k+";font-size:"+T+';">'+_.txt+"</p>"}}if(t.btns&&p(t.btns)){o+='<div id="d_dialog_footer" class="didi-dialog-footer">';for(var E=0,C=t.btns.length;C>E;E++){var S=t.btns[E];S&&(o+="confirm"===t.type?'<a class="'+S.klsName+'" id="'+S.id+'" style="width: 44%; height: 35px; line-height: 35px; margin:0 3%;">'+S.txt+"</a>":'<a class="'+S.klsName+'" id="'+S.id+'" style="width: 88%;">'+S.txt+"</a>")}o+="</div>"}if(o+="</div>",i.innerHTML=o,tmp_d_wall=n.getElementById("d_wall"),tmp_d_wrap=n.getElementById("d_wrap"),tmp_d_wall?(a.removeChild(tmp_d_wall),f(e)):f(e),tmp_d_wrap?(a.removeChild(tmp_d_wrap),f(i)):f(i),r=n.getElementById("d_wall"),c=n.getElementById("d_wrap"),t.btns&&t.btns.length&&p(t.btns))for(var B=0,L=t.btns.length;L>B;B++){var N=t.btns[B];if(N){var A=N.id,H=N.eventType||"click",M=N.callback,I=n.getElementById(A);I&&!I["on"+H]&&I.addEventListener(H,M,!1)}}}},_dialogPosi:function(){var t=o.scrollTop,e=o.scrollLeft,i=o.clientHeight,n=o.clientWidth,a=c.style.height.replace("px",""),l=c.style.width.replace("px",""),r=t+(i-a-20)/2,d=e+(n-l)/2;return{top:r,left:d}}},s.fn.show=function(){var e=this;if(r&&c){var i=o.clientHeight,n=o.clientWidth;r.style.width=n+"px",r.style.height=i+"px",r.style.display="block";var a=this._dialogPosi();c.style.top=a.top+"px",c.style.left=a.left+"px",c.style.display="block",t.addEventListener("resize",function(){e.reset.call(e)},!1),t.addEventListener("scroll",function(){e.reset.call(e)},!1)}},s.fn.hide=function(){r&&c&&(r.style.display="none",c.style.display="none")},s.fn.reset=function(){var t=r.style.display;if("block"===t&&r&&c){var e=n.documentElement.clientHeight,i=n.documentElement.clientWidth;r.style.width=i+"px",r.style.height=e+"px";var o=this._dialogPosi();c.style.top=o.top+"px",c.style.left=o.left+"px"}},i.alert=function(t,e){var i={bgcolor:"black",tips:[{txt:t,fontSize:"1.1em"}],icon:{url:"/static/webapp/images/i-alert.png",width:"61px",height:"61px"},btns:[{id:"btn_close",txt:"我知道了",klsName:"btn-orange",eventType:"click",callback:function(t){d.hide(),e&&e()}}]};d=new s(i),d.show()},i.confirm=function(t,e,i,n){return d=new s({type:"confirm",icon:{url:"/static/webapp/images/i-alert.png",width:"60px",height:"60px"},tips:[{txt:t||"确定执行此操作吗？",color:"#666666",fontSize:"1.04em"}],btns:[{id:"btn-ok",txt:"确定",klsName:"btn-orange",eventType:"click",callback:function(t){d.hide(),"function"==typeof e&&e()}},{id:"btn-cancel",txt:"取消",klsName:"btn-white",eventType:"click",callback:function(t){d.hide(),"function"==typeof i&&i()}}]}),d.show(),n===!0?!1:void 0},i.loading=function(i,n,o){var a={type:"loading",bgcolor:"#ffffff",bar:!1,d_bgcolor:"black",d_opacity:"0.7",width:"125px",height:"125px",icon:{url:"/static/webapp/images/loading_2.gif",width:"30px",height:"30px"},tips:[{txt:i||"正在加载...",color:"#FFFFFF",fontSize:"13px"}]};d=new s(a),d.show(),(null===n||n===e)&&(n=1e4),n&&t.setTimeout(function(){d.hide()},n),o&&o()},t.didi.dialog=s}(window);