let hasTouch="ontouchstart"in window,tapend=hasTouch?"touchend":"click",scrollPos=0,windowH=$(window).height(),windowW=$(window).width(),documentH=0,pct=0,sectionOffset=[],bodyEl=$("body"),loadBarEl=$("#loadbar"),sections=$("section"),navEl=$("nav"),optionTxtsizeEl=document.getElementById("option_txtsize");function rafThrottle(e){let t=!1;return function(...o){t||(requestAnimationFrame(()=>{e.apply(this,o),t=!1}),t=!0)}}function secHeight(){sections.each((o,e)=>{sectionOffset[o]=Math.floor($(e).offset().top)})}function onScroll(){scrollPos=Math.floor($(document).scrollTop()),bodyEl.toggleClass("scroll",290<scrollPos),scrollPos>sectionOffset[2]?bodyEl.addClass("f_dark_bg"):scrollPos<=sectionOffset[2]&&bodyEl.removeClass("f_dark_bg"),scrollPos>sectionOffset[4]&&bodyEl.removeClass("f_dark_bg"),scrollPos>sectionOffset[7]&&bodyEl.addClass("f_dark_bg"),scrollPos>sectionOffset[8]&&bodyEl.removeClass("f_dark_bg"),documentH=$(document).height(),pct=100-scrollPos/documentH*100+"%",loadBarEl.css("transform",`translateX(-${pct})`)}function onResize(){secHeight(),windowH=$(window).height(),windowW=$(window).width()}function textsize(o,e){$("html").removeClass("f_font14 f_font16 f_font18").addClass("f_font"+o),optionTxtsizeEl&&optionTxtsizeEl.childNodes.forEach(o=>{o.style&&(o.style.textDecoration="none")}),e&&e.style&&(e.style.textDecoration="underline"),secHeight()}function initCarousel(o,e){$(o).owlCarousel(Object.assign({autoplay:!1,smartSpeed:250,lazyLoad:!0,margin:20},e))}function initPage(){secHeight(),navEl.show(),navEl.find("a").on(tapend,secHeight),$(".f_play").on(tapend,function(){$(this).attr("target",1239<windowW?"h5stage":"_blank")}),$(".f_display").on(tapend,function(){$("#scene .layer").remove();var o=$("#showexp")[0];o&&($("#showexp").css("opacity","1"),o.play())}),$(".f_expand").on(tapend,function(){$(this).closest(".f_sm").hide().siblings(".hid").show()});[{selector:".f_owl-carousel_map",options:{loop:!1,responsive:{0:{items:1},480:{items:1}}}},{selector:".f_owl-carousel_designsystem",options:{loop:!0,responsive:{0:{items:1},800:{items:2}}}},{selector:".f_owl-carousel_pku",options:{loop:!1,responsive:{0:{items:1},480:{items:1}}}},{selector:".f_owl-carousel_ufo",options:{loop:!0,responsive:{0:{items:2},600:{items:3}}}},{selector:".f_owl-carousel_wb",options:{autoplay:!0,autoplayTimeout:3e3,autoplayHoverPause:!0,loop:!0,responsive:{0:{items:1},800:{items:2}}}},{selector:".f_owl-carousel_dd",options:{smartSpeed:100,loop:!0,responsive:{0:{items:2},800:{items:4},1240:{items:5}}}}].forEach(o=>initCarousel(o.selector,o.options)),$("#h5stage").attr("src","https://www.futurefriendly.cn/ds/page/invitation2016.html"),$(window).on("scroll",rafThrottle(onScroll)),$(window).on("resize",rafThrottle(onResize)),$(window).on("load",()=>{onScroll(),onResize()}),new SmoothScroll('a[href*="#"]',{speed:1e3})}$(document).ready(()=>{initPage()});export{hasTouch,tapend,scrollPos,windowH,windowW,documentH,pct,sectionOffset,rafThrottle,secHeight,onScroll,onResize,textsize,initCarousel,initPage};